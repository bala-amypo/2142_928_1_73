<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-parent</artifactId>
		<version>3.3.4</version>
		<relativePath/> <!-- lookup parent from repository -->
	</parent>
	<groupId>com.example</groupId>
	<artifactId>demo</artifactId>
	<version>0.0.1-SNAPSHOT</version>
	<name>demo</name>
	<description>Demo project for Spring Boot</description>
	<url/>
	<licenses>
		<license/>
	</licenses>
	<developers>
		<developer/>
	</developers>
	<scm>
		<connection/>
		<developerConnection/>
		<tag/>
		<url/>
	</scm>
	<properties>
		<java.version>17</java.version>
	</properties>
	<dependencies>
	
		<dependency>
	      <groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-security</artifactId>
		</dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-jpa</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-tomcat</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
		<dependency>
            <groupId>org.springdoc</groupId>
            <artifactId>springdoc-openapi-starter-webmvc-ui</artifactId>
            <version>2.3.0</version>
        </dependency>
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>7.8.0</version>
            <scope>test</scope>
        </dependency>
		<!-- https://mvnrepository.com/artifact/com.mysql/mysql-connector-j -->
<dependency>
    <groupId>com.mysql</groupId>
    <artifactId>mysql-connector-j</artifactId>
    <version>8.0.33</version>
</dependency>
    </dependencies>

	<build>
		<plugins>
			<plugin>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-maven-plugin</artifactId>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-surefire-plugin</artifactId>
				<version>3.2.5</version>
				<dependencies>
					<dependency>
						<groupId>org.apache.maven.surefire</groupId>
						<artifactId>surefire-testng</artifactId>
						<version>3.2.5</version>
					</dependency>
				</dependencies>
			</plugin>
		</plugins>
	</build>


</project>


Multi-LeveI Approval Workflow Engine
This Multi-Level Approval Workflow Engine lets an authenticated user (a requester) log in via
JWT, submit a new approval request against a chosen workflow template, and then
automatically routes that request through a chain of configured steps (LI L2 L3m) where
users in specific approver roles review it and record actions (APPROVED/REJECTED) while every
step is stored as an ApprovalAction and mirrored in AuditLogRecord for a complete trail;
templates and their steps are defined by an ADMINICONFIGURATOR role using
WorkflowTempIate and WorkflowStepConfig (each step linked to an approverRole like
MANAGER, FINANCE, DIRECTOR), everyday business users act as REQUESTERS who create and
track their requests, designated APPROVERS (LI/L2/L3 based on their Role mapping) see their
pending items and approve/reject at their configured level, and optional AUDITOR/REPORTING
users can read templates, steps, requests, actions, and audit logs to monitor SLA, escalations,
and compliance, while the HibernateQueryUtil supports advanced queries like "all actions for a
given approver," and the whole thing is exposed as REST APIs under /api/** protected by JWT
with /auth/register and /auth/login for user onboarding and authentication.
Constraint: The root package for the project must be com.example.demo.
Project Requirements: Spring Boot + Hibernate + MySQL + JWT + Swagger
STEP O — Technical Constraints (Critical for Testing)
You must strictly follow these technical rules to pass the automated test suite:
Hibernate Query Utility:
Create a class com.example.demo.util.HibernateQueryUtil annotated with
@Component.
It must implement a method: public List< ApprovalAction>
findActionsByApproverUsingCriteria (Long approverld).
This method must use Hibernate Criteria API or JPA CriteriaBuilder to fetch actions by
approverld.
Entity Constraints (Critical):
2.
WorkflowStepConfig: Must have a field private Long templateld; (Do NOT use
@ManyToOne relationship for this field; store the ID directly as a Long for test
compatibility).
User: Ensure the class is named User (not UserAccount) and has a field Set<Role> roles
(Many-to-Many).
Repository Method Signatures (Exact Naming Required):
3.
WorkflowStepConfigRepository: findByTemplateldOrderByLevelNumberAsc(Long
templateld).
ApprovalActionRepository: findByLevelAndAction(lnteger levelNumber, String action).
AuditLogRecordRepository: findByRequestld (Long requestld).
RoleRepository: Optional< Role) findByName(String name).
4. Service Constructor Signatures: To ensure your code works with the automated test suite,
your Service constructors must accept dependencies in the following exact order:
o WorkflowTempIateService: (workflowTemplateRepository)
o WorkflowStepConfigService: (workflowstepconfigRepository)
o ApprovalRequestService: (ApprovalRequestRepository, WorkflowStepConfigRepository,
WorkflowTemolateReoositorv. AoorovalActionReoositorv)
3. ApprovalRequest
Fields: id (Long, PK), templateld (Long), requesterld (Long), requestTitle (String),
requestPayloadJson (String, LOB), status (String), currentLevel (Integer), createdAt
(LocalDateTime)
Rules: status defaults to "PENDING".
4. ApprovalAction
Fields: id (Long, PK), requestld (Long), approverld (Long), levelNumber (Integer), action
(string: APPROVED/REJECTED), comments (string), actionDate (LocalDateTime)
S. AuditLogRecord
Fields: id (Long, PK), requestld (Long), eventType (string), details (String), loggedAt
(LocalDateTime)
User: idf username, email, password, roles (ManyToMany).
Role: id, name.
STEP 2 - Authentication using JWT
Endpoints: /auth/register, /auth/login.
Access: All endpoints require JWT.
STEP 3 - Create Repositories (MySQL)
WorkflowTemplateRepository, WorkflowStepConfigRepository, ApprovalRequestRepository,
ApprovalActionRepository, AuditLogRecordRepository, UserRepository, RoleRepository.
STEP 4 — Implement Service Interfaces
1. WorkflowTemplateService
createTemplate(WorkflowTemplate t)
getTemplateByld(Long id)
getAllTemplates()
updateTemplate(Long idf WorkflowTemplate t)